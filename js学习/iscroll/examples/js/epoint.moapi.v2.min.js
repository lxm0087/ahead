(function(b,a){var c=a(b);if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=c}else{if(typeof define==="function"&&(define.amd||define.cmd)){define(function(){return c})}}})(typeof window!=="undefined"?window:global,function(b){var a=function(d){for(var c in d){return !1}return !0};if(!a(b.ejs)){return b.ejs}return(function(h,k){(function(){h.extend=function(){var y,r,p,q,v,w,u=arguments[0]||{},t=1,s=arguments.length,x=false;if(typeof u==="boolean"){x=u;u=arguments[t]||{};t++}if(typeof u!=="object"&&!h.isFunction(u)){u={}}if(t===s){u=this;t--}for(;t<s;t++){if((y=arguments[t])!=null){for(r in y){p=u[r];q=y[r];if(u===q){continue}if(x&&q&&(h.isPlainObject(q)||(v=h.isArray(q)))){if(v){v=false;w=p&&h.isArray(p)?p:[]}else{w=p&&h.isPlainObject(p)?p:{}}u[r]=h.extend(x,w,q)}else{if(q!==undefined){u[r]=q}}}}}return u};h.isFunction=function(p){return h.type(p)==="function"};h.isPlainObject=function(p){return h.isObject(p)&&!h.isWindow(p)&&Object.getPrototypeOf(p)===Object.prototype};h.isArray=Array.isArray||function(p){return p instanceof Array};h.isWindow=function(p){return p!=null&&p===p.window};h.isObject=function(p){return h.type(p)==="object"};h.type=function(p){return p==null?String(p):o[{}.toString.call(p)]||"object"};h.each=function(r,s,q){if(!r){return this}if(typeof r.length==="number"){[].every.call(r,function(u,t){return s.call(u,t,u)!==false})}else{for(var p in r){if(q){if(r.hasOwnProperty(p)){if(s.call(r[p],p,r[p])===false){return r}}}else{if(s.call(r[p],p,r[p])===false){return r}}}}return this};var o={};h.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(q,p){o["[object "+p+"]"]=p.toLowerCase()});(function(){function p(r){this.os={};this.os.name="browser";var q=[function(){var s=r.match(/(Android);?[\s\/]+([\d.]+)?/);if(s){this.os.android=true;this.os.version=s[2];this.os.isBadAndroid=!(/Chrome\/\d/.test(window.navigator.appVersion));this.os.name+="_Android";this.os.name+="_mobile"}return this.os.android===true},function(){var t=r.match(/(iPhone\sOS)\s([\d_]+)/);if(t){this.os.ios=this.os.iphone=true;this.os.version=t[2].replace(/_/g,".");this.os.name+="_iphone";this.os.name+="_mobile"}else{var s=r.match(/(iPad).*OS\s([\d_]+)/);if(s){this.os.ios=this.os.ipad=true;this.os.version=s[2].replace(/_/g,".");this.os.name+="_iOS";this.os.name+="_mobile"}}return this.os.ios===true}];[].every.call(q,function(s){return !s.call(h)})}p.call(h,navigator.userAgent)})();(function(){function p(s){this.os=this.os||{};var r=s.match(/EpointEJS/i);if(r){this.os.ejs=true;this.os.name+="_ejs"}var q=s.match(/DingTalk/i);if(q){this.os.dd=true;this.os.name+="_dd"}}p.call(h,navigator.userAgent)})()})();var e="epoint_bridge";var d;var g=[];ejs.EJS_API=e;var m="custom_epoint_bridge";ejs.EJS_API_CUSTOM=m;var j={};(function(){var q=Object.prototype.hasOwnProperty;window.JSBridge=window.top.JSBridge||{};var s="EpointJSBridge";var r=window.top.document.createElement("iframe");r.style.display="none";if(ejs.os.ejs&&ejs.os.ios){r.src=s+"://__BRIDGE_LOADED__"}document.documentElement.appendChild(r);var o={};var t=1;var z={};var u=true;var y=[];var v={registerHandler:function(A,B){z[A]=B},registerLongCallback:function(A,B){j[A]=B},callHandler:function(C,A,B,D){if(arguments.length==3&&typeof B=="function"){D=B;B=null}p(C,{handlerName:A,data:B},D)},_fetchQueue:function(){var A=JSON.stringify(y);y=[];return A},_handleMessageFromNative:function(A){if(u){setTimeout(B)}else{B()}function B(){var E;try{if(typeof A==="string"){E=JSON.parse(A)}else{E=A}}catch(F){console.error("原生调用H5方法出错,传入参数错误");return}var D;if(E.responseId){D=o[E.responseId];D=D||j[E.responseId];if(!D){return}D&&D(E.responseData);delete o[E.responseId]}else{if(E.callbackId){var G=E.callbackId;D=function(H){p(e,{handlerName:E.handlerName,responseId:G,responseData:H})}}var C=z[E.handlerName];if(!C){}else{C(E.data,D)}}}},disableJavscriptAlertBoxSafetyTimeout:function(){u=false}};function p(E,C,A){if(A&&(typeof A==="function")){var D=w.getCallbackId();o[D]=A;C.callbackId=D}else{if(typeof A==="string"||typeof A==="number"){C.callbackId=A}}if(ejs.os.ios){y.push(C)}var B=w.getUri(E,C);if(ejs.os.ejs){if(ejs.os.ios){r.src=B}else{window.top.prompt(B,"")}}else{console.error("浏览器中ejs无效,scheme:"+B)}}var w={getCallbackId:function(){return Math.floor(Math.random()*(1<<30))+""},getUri:function(D,B){var A=s+"://"+D;if(!ejs.os.ios){var C,F,E;if(B.callbackId){C=B.callbackId;F=B.handlerName;E=B.data}else{if(B.responseId){C=B.responseId;F=B.handlerName;E=B.responseData}}E=this.getParam(E);A+=":"+C+"/"+F+"?"+E}return A},getParam:function(A){if(A&&typeof A==="object"){return JSON.stringify(A)}else{return A||""}}};for(var x in v){if(!q.call(JSBridge,x)){JSBridge[x]=v[x]}}JSBridge.registerHandler("handleError",function(B){if(d){for(var A=0;A<g.length;A++){d(g[A])}g=[];d(B)}else{g.push(B)}})})();(function(){function p(s,u,v,q){q=q||false;if(!ejs[s]){ejs[s]={}}var t=ejs[s];var r=t[u];t[u]=function(){!q&&r&&r.apply(this,arguments);v.apply(this,arguments)}}function o(q,s){for(var r in s){p(q,r,s[r])}}h.extendFuc=p;h.extendFucObj=o})();var f="file:///android_asset/";var c="";function n(){var o=window.ejsForceLocal||k;var s="";if(!o){var r=window.location;var p=r.pathname;var q="";q=p.substr(0,p.lastIndexOf("/html")+1);if(!q||q==="/"){q=p.substr(0,p.lastIndexOf("/pages")+1)}s=r.protocol+"//"+r.host+(q?q:"/")}else{if(ejs.os.android){s=f}else{if(ejs.os.ios){s=c}}}return s}function l(p){if(/^(http|https|ftp)/g.test(p)){return p}var o=p.indexOf("./")!=-1||p.indexOf("../")!=-1;p=(o?p:((n())+p));return p}function i(o,r){o=o||"";o=l(o);var p="";if(r){for(var q in r){if(p.indexOf("?")==-1&&o.indexOf("?")==-1){p+="?"}else{p+="&"}p+=q+"="+r[q]}}o=o+p;return o}ejs.page={openPage:function(q,r,t,p,s,o){t=t||{};p=p||{};q=i(q,t);p.PAGE_URL=q;p.PAGE_TITLE=r||"";if(ejs.os.ejs||p.isDebug){JSBridge.callHandler(e,"openPage",{finishAfterOpen:p.finishAfterOpen||"0",requestCode:p.requestCode||1101,data:p},function(u){if(u.code=="4"){s&&s(u.result,u.msg,u)}else{if(u.code=="0"){o&&o(u)}else{o&&o(u)}}})}else{document.location.href=q}},openPageMulti:function(p,s,u){var t=[];for(var q=0,o=p.length;q<o;q++){t[q]={};t[q].PAGE_URL=i(p[q].url,p[q].jsonObj);t[q].PAGE_TITLE=p[q].title;for(var r in p[q].options){t[q][r]=p[q].options[r]}}JSBridge.callHandler(e,"openPage",{finishAfterOpen:s.finishAfterOpen||"0",requestCode:s.requestCode||"1101",data:t},function(v){if(v.code=="4"){u&&u(v.result,v.msg,v)}})},openLocal:function(q,s,p,r,o){s=s||{};if(typeof arguments[2]==="function"){p={};r=arguments[2];o=arguments[3]}p=p||{};s=ejs.extend(s,p,false);JSBridge.callHandler(e,"openLocal",{localPageClassName:q,finishAfterOpen:p.finishAfterOpen||"0",requestCode:p.requestCode||"1101",openExistLocal:p.openExistLocal||false,data:s},function(t){if(t.code=="4"){r&&r(t.result,t.msg,t)}else{if(t.code=="0"){o&&o(t)}}})},closePage:function(o){if(typeof o==="object"){o=JSON.stringify(o)}if(ejs.os.ejs){JSBridge.callHandler(e,"closePage",{resultData:o},function(p){})}else{if(window.history.length>1){window.history.back();return true}}},setResumeReload:function(o){JSBridge.callHandler(e,"setResumeReload",{},function(p){o&&o(null,p.msg,p)})},setResumeCallback:function(p){var o="10000002";JSBridge.registerLongCallback(o,function(q){if(q.code=="3"){p&&p(q.result,q.msg,q)}});JSBridge.callHandler(e,"setResumeCallback",{},o)},reloadPage:function(o){if(ejs.os.ejs){JSBridge.callHandler(e,"reloadPage",{},function(p){o&&o(p.result,p.msg,p)})}else{window.location.reload()}}};ejs.nativeUI={toast:function(o){var p="";o=o||{};if(typeof o==="string"){p=o}else{p=o.message}JSBridge.callHandler(e,"toast",{message:p},function(q){})},showDebugDialog:function(o){JSBridge.callHandler(e,"showDebugDialog",{debugInfo:o},function(p){});if(!ejs.os.ejs){ejs.nativeUI.alert(o)}},alert:function(o){var q="",p="";o=o||{};if(typeof o==="string"){p=o;q=arguments[1]||""}else{p=o.message;q=o.title}JSBridge.callHandler(e,"showMsgDialog",{title:q,message:p},function(r){})},confirm:function(o,p){o=o||{};if(typeof o==="string"){o={message:o};if(typeof arguments[1]==="string"){o.title=arguments[1];p=arguments[2]}}JSBridge.callHandler(e,"showConfirmDialog",{title:o.title,message:o.message,btn1:o.btn1||"取消",btn2:o.btn2||(o.btn2!==null?"确定":""),cancelable:o.cancelable||0,},function(q){p&&p(q.result,q.msg,q)})},prompt:function(o,p){o=o||{};JSBridge.callHandler(e,"showEditTextDialog",{title:o.title,hint:o.hint,text:o.text,cancelable:o.cancelable||0,lines:o.lines||1,maxLength:o.maxLength||10000},function(q){p&&p(q.result,q.msg,q)})},select:function(o,q){o=o||{};o.items=o.items||[];o.checkState=o.checkState||[];var p=o.isMultiSelect||false;JSBridge.callHandler(e,"showSelectedDialog",{title:o.title,items:o.items.join(","),checkState:o.checkState.join(","),cancelable:o.cancelable||0,isMultiSelect:p,type:o.type||0,columns:o.columns||3,},function(v){var w=[];var y=v.result;if(p){var t=y.choiceState;t=t.split(",");var z=[];for(var s=0,u=t.length;s<u;s++){if(t[s]!=null&&t[s]!=""){z.push(t[s]);if(t[s]=="1"){w.push(o.items[s]||"")}}}}else{var r=y.which;var x=o.items[r];w.push(x)}y.items=w;q&&q(v.result,v.msg,v)})},actionSheet:function(o,p){o=o||{};o.items=o.items||[];JSBridge.callHandler(e,"showActionsheet",{items:o.items.join(","),cancelable:o.cancelable||0},function(r){var q=-1;var s="";if(r.result){q=r.result.which||0;s=o.items[q];r.result.content=s}p&&p(r.result,r.msg,r)})},popWindow:function(o,p){o=o||{};o.titleItems=o.titleItems||[];o.iconItems=o.iconItems||[];JSBridge.callHandler(e,"showPopupWindow",{titleItems:o.titleItems.join(","),iconItems:o.iconItems.join(","),orientation:o.orientation||""},function(q){p&&p(q.result,q.msg,q)})},pickDate:function(o,p){o=o||{};JSBridge.callHandler(e,"showDatePickDialog",{title:o.title,datetime:o.datetime},function(q){p&&p(q.result,q.msg,q)})},pickTime:function(o,p){o=o||{};JSBridge.callHandler(e,"showTimePickDialog",{title:o.title,datetime:o.datetime},function(q){p&&p(q.result,q.msg,q)})},pickDateTime:function(o,p){o=o||{};JSBridge.callHandler(e,"showDateTimePickDialog",{title1:o.title1,title2:o.title2,datetime:o.datetime},function(q){p&&p(q.result,q.msg,q)})},showWaiting:function(){JSBridge.callHandler(e,"showProgress",{},function(o){})},showMask:function(){if(!this.mask){this.mask=mui.createMask()}this.mask.show()},hideMask:function(){if(this.mask){this.mask.close()}},closeWaiting:function(){JSBridge.callHandler(e,"hideProgress",{},function(o){})},pullToRefresh:{disable:function(){JSBridge.callHandler(e,"setSwipeRefreshEnable",{swipeRefreshEnable:false},function(o){})},enable:function(p){var o="10000001";JSBridge.registerLongCallback(o,function(q){if(q.code=="2"){p&&p(q.result,q.msg,q)}});JSBridge.callHandler(e,"setSwipeRefreshEnable",{swipeRefreshEnable:true},o)},stop:function(){JSBridge.callHandler(e,"stopSwipeRefresh",{},function(o){})}}};ejs.navigator={showNavigation:function(){JSBridge.callHandler(e,"showNavigation",{},function(o){})},hideNavigation:function(){JSBridge.callHandler(e,"hideNavigation",{},function(o){})},setTitle:function(o){o=o||"";JSBridge.callHandler(e,"setNaigationTitle",{PAGE_TITLE:o},function(p){})},setRightTextBtn:function(o,p){o=o||"";JSBridge.callHandler(e,"setNBRightText",{nbRightText:o},function(q){});if(p){window.onClickNBRightEJS=function(){p&&p()}}},setRightImageBtn:function(o){JSBridge.callHandler(e,"setNBRightImage",{nbRightImage:o},function(p){})},hideBackButton:function(){JSBridge.callHandler(e,"hideBackButton",{},function(o){})},showSearchBar:function(){JSBridge.callHandler(e,"showSearchBar",{},function(o){})},hideSearchBar:function(){JSBridge.callHandler(e,"hideSearchBar",{},function(o){})},setBgColor:function(o){JSBridge.callHandler(e,"setBgColor",{Color:o},function(p){})},setNbBarTheme:function(o){JSBridge.callHandler(e,"setNbBarTheme",{ThemeId:o},function(p){})},setSkinTheme:function(o){o=o||"default";if(o==="day"){ejs.navigator.setBgColor("ffffff");ejs.navigator.setNbBarTheme("theme_default_blue")}else{if(o==="night"){ejs.navigator.setBgColor("1a1a1a");ejs.navigator.setNbBarTheme("theme_night")}else{ejs.navigator.setBgColor("ffffff");ejs.navigator.setNbBarTheme("theme_default_blue")}}},};ejs.sql={getConfigValue:function(o,p){o=o||"";JSBridge.callHandler(e,"getConfigValue",{config_key:o},function(q){q=q||{};p&&p(q.result,q.msg,q)})},setConfigValue:function(o,p,q){o=o||"";JSBridge.callHandler(e,"setConfigValue",{config_key:o,config_value:p},function(r){r=r||{};q&&q(r.result,r.msg,r)})}};ejs.oauth={getToken:function(p,o){if(ejs.os.ejs){JSBridge.callHandler(e,"getToken",{},function(q){q=q||{};p&&p(q.result,q.msg,q)})}else{p&&p({result:{token:o||"gtig_newtech**##"}})}},getAppGuid:function(o){JSBridge.callHandler(e,"getAppGuid",{},function(p){p=p||{};o&&o(p.result,p.msg,p)})}};ejs.runtime={launchApp:function(o,p){o=o||{};JSBridge.callHandler(e,"openApp",{PackageName:o.PackageName,ClassName:o.ClassName,ActionName:o.ActionName,Scheme:o.Scheme,Param:o.Param},function(q){q=q||{};p&&p(q.result,q.msg,q)})},getVersionName:function(o,p){o=o||{};if(typeof o==="function"){p=o}JSBridge.callHandler(e,"getVersionName",{},function(q){q=q||{};p&&p(q.result,q.msg,q)})},clearCache:function(o,p){o=o||{};if(typeof o==="function"){p=o}JSBridge.callHandler(e,"clearCache",{},function(q){q=q||{};p&&p(q.result,q.msg,q)})},};ejs.device={getNetWorkType:function(o){JSBridge.callHandler(e,"getNetWorkType",{},function(p){o&&o(p.result,p.msg,p)})},setOrientation:function(o){JSBridge.callHandler(e,"setOrientation",{orientation:o||"2"},function(p){p=p||{};callback&&callback(p.result,p.msg,p)})},getPixel:function(o){JSBridge.callHandler(e,"getPixel",{},function(p){p=p||{};o&&o(p.result,p.msg,p)})},getUAinfo:function(o){JSBridge.callHandler(e,"getUAinfo",{},function(p){p=p||{};o&&o(p.result,p.msg,p)})},getMacAddress:function(o){JSBridge.callHandler(e,"getMacAddress",{},function(p){p=p||{};o&&o(p.result,p.msg,p)})},getDeviceId:function(o){JSBridge.callHandler(e,"getDeviceid",{},function(p){p=p||{};o&&o(p.result,p.msg,p)})},callPhone:function(o,p){o=o||{};if(typeof o==="string"){o={phoneNum:o}}JSBridge.callHandler(e,"call",{phoneNum:o.phoneNum},function(q){p&&p(q.result,q.msg,q)})},sendMsg:function(o,p){o=o||{};if(typeof o==="string"){o={phoneNum:o,message:arguments[1]};p=arguments[2]}JSBridge.callHandler(e,"sendMsg",{phoneNum:o.phoneNum,message:o.message},function(q){p&&p(q.result,q.msg,q)})},isTablet:function(o){JSBridge.callHandler(e,"isTablet",{},function(p){p=p||{};o&&o(p.result,p.msg,p)})}};ejs.app={getExtraDataByKey:function(o){if(!o){return null}var q=function(t,x){var v=t.substring(t.indexOf("?")+1,t.length).split("&");var r={};var u,s;for(u=0;s=v[u];u++){r[s.substring(0,s.indexOf("=")).toLowerCase()]=s.substring(s.indexOf("=")+1,s.length)}var w=r[x.toLowerCase()];w=decodeURIComponent(w);if(typeof(w)=="undefined"){return undefined}else{return w}};var p=q(window.location.href,o);if(p==="undefined"){p=null}return p},appendParams:function(o,p){return i(o,p)},};ejs.nativeComponents={openScan:function(p,q,o){p=p||{};JSBridge.callHandler(e,"openScan",{isOrientationLocked:p.isOrientationLocked||"0"},function(r){if(r.code=="4"){q&&q(r.result,r.msg,r)}else{if(r.code=="0"){o&&o(r)}}})},downloadFile:function(p,q,o){p=p||{};JSBridge.callHandler(e,"downloadFile",{type:p.type||"其他",reDownloaded:p.reDownloaded,url:p.url,fileName:p.fileName,isBackground:p.isBackground||0,},function(r){if(r.code=="1"){q&&q(r.result,r.msg,r)}else{if(r.code=="0"){o&&o(r)}}})},historySearch:function(p,q,o){p=p||{};JSBridge.callHandler(e,"historySearch",{hint:p.hint},function(r){if(r.code=="4"){q&&q(r.result,r.msg,r)}else{if(r.code=="0"){o&&o(r)}}})},selectContact:function(p,q,o){p=p||{};JSBridge.callHandler(e,"selectContact",{isSingle:p.isSingle||"0",selectedInfo:p.selectedInfo,transFilterNames:p.transFilterNames||"",transFilterGuids:p.transFilterGuids||""},function(r){if(r.code=="4"||r.code=="1"){q&&q(r.result,r.msg,r)}else{if(r.code=="0"){o&&o(r)}}})},selectPics:function(p,q,o){p=p||{};JSBridge.callHandler(e,"selectPics",{maxPic:p.maxPic},function(r){if(r.code=="4"){q&&q(r.result,r.msg,r)}else{if(r.code=="0"){o&&o(r)}}})},previewPics:function(o){o=o||{};JSBridge.callHandler(e,"previewPics",{url:o.url,index:o.index||0},function(){})},updateApp:function(){JSBridge.callHandler(e,"updateApp",{},function(){})},sysShare:function(o){o=o||{};var p="";if(typeof o==="string"){p=o}else{p=o.shareTitle}JSBridge.callHandler(e,"sysShare",{shareTitle:p||"",shareURL:o.shareURL,shareImgBase64:o.shareImgBase64,shareImgURL:o.shareImgURL,SDPath:o.SDPath,},function(){})},playVideo:function(p,q,o){p=p||{};JSBridge.callHandler(e,"playVideo",{videoUrl:p.videoUrl||"",thumbUrl:p.thumbUrl||"",title:p.title||"",},function(r){if(r.code=="1"){q&&q(r.result,r.msg,r)}else{if(r.code=="0"){o&&o(r)}}})},collection:{saveLocalCollections:function(p,q,o){JSBridge.callHandler(e,"saveLocalCollections",{MsgGuid:p.MsgGuid||"",Title:p.Title||"",DateTime:p.DateTime||"",Publisher:p.Publisher||"",Type:p.Type||"",URL:p.URL||"",Remark:p.Remark||"",Flag:p.Flag||"",},function(r){if(r.code=="1"){q&&q(r.result,r.msg,r)}else{o&&o(r)}})},getLocalCollections:function(o,p){if(typeof arguments[0]==="function"){p=typeof arguments[0];o={}}o=o||{};JSBridge.callHandler(e,"getLocalCollections",{pageIndex:o.pageIndex||1,pageSize:o.pageSize||10},function(q){p&&p(q.result,q.msg,q)})},isCollection:function(o,p){JSBridge.callHandler(e,"isCollection",{MsgGuid:o},function(q){p&&p(q.result,q.msg,q)})},delCollection:function(p,q,o){JSBridge.callHandler(e,"delCollection",{MsgGuid:p},function(r){if(r.code=="1"){q&&q(r.result,r.msg,r)}else{o&&o(r)}})},delAllCollections:function(p,o){JSBridge.callHandler(e,"delAllCollections",{},function(q){if(q.code=="1"){p&&p(q.result,q.msg,q)}else{o&&o(q)}})},},};ejs.error=function(o){d=o};ejs.call=function(o,q,r,p){p=p||m;q=q||{};JSBridge.callHandler(p,o,q,function(s){r&&r(s.result,s.msg,s)})};h.version="2.1.6";return h})(b.ejs={},false)});